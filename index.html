<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>قراءات العملي</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    html {
      font-family: "Scheherazade New";
      direction: rtl;
    }
    p, h1 {
      direction: rtl;
      font-family: "Scheherazade New", serif;
    }
    .leading-relaxed {
        line-height: 2;
    }
    .main-box {
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      transition: all 0.3s ease;
    }
    .main-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    .option-box {
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      background-color: white;
      border: 1px solid #e5e7eb;
      border-radius: 0.75rem;
      padding: 1.25rem;
      text-align: center;
      cursor: pointer;
    }
    .option-box:hover {
      transform: translateY(-4px);
      background-color: #f3f4f6;
    }
    .sub-box {
      animation: fadeIn 0.5s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .click-sound {
      cursor: pointer;
      transition: background-color 0.3s ease, border 0.3s ease;
    }
    .click-sound.selected {
      background-color: #ede9fe;
      border-radius: 0.375rem;
    }
    .audio-button {
      margin-right: 8px;
      margin-left: 15px;
      color: rgb(56, 122, 228);
      cursor: pointer;
      padding-left: 200px;
      padding: 7px;
      outline: auto;
    }
    .audio-button:hover {
      transition: 500ms ease-in-out;
      transform: scale(1.1); 
}

.audio-button.active {
  box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2);
  border-radius: 50%;
  transform: scale(1.25);
}



    #imageModal {
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

#imageModal.show {
  opacity: 1;
  pointer-events: auto;
}

  </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center py-12 px-4">
  <div class="w-full max-w-6xl mx-auto">
    <div class="main-box bg-white rounded-xl p-8 mb-12 border border-gray-300 relative overflow-hidden">
      <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-blue-500"></div>
      <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">سورة البقرة آية ١٣٥-١٤١</h1>
      <div class="text-black-700 leading-relaxed" id="mainText" style="line-height: 2.8;">
        <p class="mb-4 click-sound bg-white shadow-sm" onclick="setSelectedAyah(0, this)">وَقَالُوا۟ كُونُوا۟ هُودًا أَوْ نَصَـٰرَىٰ تَهْتَدُوا۟ ۗ قُلْ بَلْ مِلَّةَ إِبْرَٰهِـۧمَ حَنِيفًۭا ۖ وَمَا كَانَ مِنَ ٱلْمُشْرِكِينَ (١٣٥)</p>
        <p class="mb-4 click-sound bg-white shadow-sm" onclick="setSelectedAyah(1, this)"> قُولُوٓا۟ ءَامَنَّا بِٱللَّهِ وَمَآ أُنزِلَ إِلَيْنَا وَمَآ أُنزِلَ إِلَىٰٓ إِبْرَٰهِـۧمَ وَإِسْمَـٰعِيلَ وَإِسْحَـٰقَ وَيَعْقُوبَ وَٱلْأَسْبَاطِ وَمَآ أُوتِىَ مُوسَىٰ وَعِيسَىٰ وَمَآ أُوتِىَ ٱلنَّبِيُّونَ مِن رَّبِّهِمْ لَا نُفَرِّقُ بَيْنَ أَحَدٍۢ مِّنْهُمْ وَنَحْنُ لَهُۥ مُسْلِمُونَ (١٣٦)</p>
        <p class="mb-4 click-sound bg-white shadow-sm" onclick="setSelectedAyah(2, this)">فَإِنْ ءَامَنُوا۟ بِمِثْلِ مَآ ءَامَنتُم بِهِۦ فَقَدِ ٱهْتَدَوا۟ ۖ وَّإِن تَوَلَّوْا۟ فَإِنَّمَا هُمْ فِى شِقَاقٍۢ ۖ فَسَيَكْفِيكَهُمُ ٱللَّهُ ۚ وَهُوَ ٱلسَّمِيعُ ٱلْعَلِيمُ (١٣٧)</p>
        <p class="mb-4 click-sound bg-white shadow-sm" onclick="setSelectedAyah(3, this)">صِبْغَةَ ٱللَّهِ ۖ وَمَنْ أَحْسَنُ مِنَ ٱللَّهِ صِبْغَةًۭ ۖ وَنَحْنُ لَهُۥ عَـٰبِدُونَ (١٣٨)</p>
        <p class="mb-4 click-sound bg-white shadow-sm" onclick="setSelectedAyah(4, this)">قُلْ أَتُحَآجُّونَنَا فِى ٱللَّهِ وَهُوَ رَبُّنَا وَرَبُّكُمْ وَلَنَآ أَعْمَـٰلُنَا وَلَكُمْ أَعْمَـٰلُكُمْ وَنَحْنُ لَهُۥ مُخْلِصُونَ (١٣٩)</p>
        <p class="mb-4 click-sound bg-white shadow-sm" onclick="setSelectedAyah(5, this)">أَمْ تَقُولُونَ إِنَّ إِبْرَٰهِـۧمَ وَإِسْمَـٰعِيلَ وَإِسْحَـٰقَ وَيَعْقُوبَ وَٱلْأَسْبَاطَ كَانُوا۟ هُودًا أَوْ نَصَـٰرَىٰ ۗ قُلْ ءَأَنتُمْ أَعْلَمُ أَمِ ٱللَّهُ ۗ وَمَنْ أَظْلَمُ مِمَّن كَتَمَ شَهَـٰدَةً عِندَهُۥ مِنَ ٱللَّهِ ۗ وَمَا ٱللَّهُ بِغَـٰفِلٍ عَمَّا تَعْمَلُونَ (١٤٠)</p>
        <p class="mb-4 click-sound bg-white shadow-sm" onclick="setSelectedAyah(6, this)">تِلْكَ أُمَّةٌۭ قَدْ خَلَتْ ۖ لَهَا مَا كَسَبَتْ وَلَكُم مَّا كَسَبْتُمْ ۖ وَلَا تُسْـَٔلُونَ عَمَّا كَانُوا۟ يَعْمَلُونَ (١٤١)</p>
      </div>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4 mb-12" id="optionContainer">
      <div class="option-box" onclick="showSubBoxes('nafie', ['قالون','ورش'])"><i class="fas fa-book-open text-blue-500 text-2xl mb-2"></i><p>نافع</p></div>
      <div class="option-box" onclick="showSubBoxes('ibnKathir', ['البزي','قنبل'])"><i class="fas fa-book-open text-blue-500 text-2xl mb-2"></i><p>ابن كثير</p></div>
      <div class="option-box" onclick="showSubBoxes('abuAmr', ['الدوري','السوسي'])"><i class="fas fa-book-open text-blue-500 text-2xl mb-2"></i><p>أبو عمرو</p></div>
      <div class="option-box" onclick="showSubBoxes('ibnAmir', ['هشام','ابن ذكوان'])"><i class="fas fa-book-open text-blue-500 text-2xl mb-2"></i><p>ابن عامر</p></div>
      <div class="option-box" onclick="showSubBoxes('asim', ['شعبة','حفص'])"><i class="fas fa-book-open text-blue-500 text-2xl mb-2"></i><p>عاصم</p></div>
      <div class="option-box" onclick="showSubBoxes('hamzah', ['خلف','خلاد'])"><i class="fas fa-book-open text-blue-500 text-2xl mb-2"></i><p>حمزة</p></div>
      <div class="option-box" onclick="showSubBoxes('kisaie', ['أبو الحارث','الدوري الكسائي'])"><i class="fas fa-book-open text-blue-500 text-2xl mb-2"></i><p>الكسائي</p></div>
    </div>


    <div class="hidden" id="subBoxesContainer">
      <div id="subBoxesWrapper" class="flex flex-wrap gap-6 mb-12 justify-center"></div>
      <div class="text-center">
        <button onclick="hideSubBoxes()" class="px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg">
          <i class="fas fa-times mr-2"></i> إغلاق التفاصيل
        </button>
      </div>
    </div>
  </div>


        <!-- Audio Player Section -->
<div id="audioPlayerContainer" class="w-full max-w-4xl mx-auto mb-6 hidden">
  <audio id="ayahAudioPlayer" controls class="w-full rounded-lg shadow" style="margin-top: 
  50px;"></audio>
</div>

    <div id="imageModal" class="fixed inset-0 z-50 bg-black bg-opacity-70 hidden overflow-y-auto">
  <div class="min-h-screen flex items-center justify-center p-6">
    <div class="relative max-w-4xl w-full modal-content">
      <button onclick="closeImageModal()">&times;</button>
      <img id="modalImage" src="" alt="Full Page" class="w-full h-auto rounded-lg shadow-lg">
      <div class="text-center mt-4">
        <a id="downloadLink" href="#" download> </a>
      </div>
    </div>
  </div>



  <script>
    const clickSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3");
    let selectedAyahIndex = 0;
    let previouslySelected = null;
    let currentReaders = [];
    let currentAudio = null;

    const audioSources = {
      "قالون": {
        135: "Audio/(135) QALUN.m4a",
        136: "Audio/(136) QALUN.m4a",
        137: "Audio/(137) QALUN.m4a",
        138: "Audio/(138) QALUN.m4a",
        139: "Audio/(139) QALUN.m4a",
        140: "Audio/(140) QALUN.m4a",
        141: "Audio/(141) QALUN.m4a"
      },
      "ورش": {
        135: "Audio/(135) WARSH.m4a",
        136: "Audio/(136) WARSH.m4a",
        137: "Audio/(137) WARSH.m4a",
        138: "Audio/(138) WARSH.m4a",
        139: "Audio/(139) WARSH.m4a",
        140: "Audio/(140) WARSY.m4a",
        141: "Audio/(141) WARSH.m4a"
      },
      "البزي": {
        135: "Audio/(135) BAZZI.m4a",
        136: "Audio/(136) BAZZI.m4a",
        137: "Audio/(137) BAZZI.m4a",
        138: "Audio/(138) BAZZI.m4a",
        139: "Audio/(139) BAZZI.m4a",
        140: "Audio/(140) BAZZI.m4a",
        141: "Audio/(141) BAZZI.m4a"
      },
      "قنبل": {
        135: "Audio/(135) QUNBUL.m4a",
        136: "Audio/(136) QUNBUL.m4a",
        137: "Audio/(137) QUNBUL.m4a",
        138: "Audio/(138) QUNBUL.m4a",
        139: "Audio/(139) QUNBUL.m4a",
        140: "Audio/(140) QUNBUL.m4a",
        141: "Audio/(141) QUNBUL.m4a"
      },
        "الدوري": {
        135: "Audio/(135) DURI.m4a",
        136: "Audio/(136) DURI.m4a",
        137: "Audio/(137) DURI.m4a",
        138: "Audio/(138) DURI.m4a",
        139: "Audio/(139) DURI.m4a",
        140: "Audio/(140) DURI.m4a",
        141: "Audio/(141) DURI.m4a"
      },
      "السوسي": {
        135: "Audio/(135) SUSI.m4a",
        136: "Audio/(136) SUSI.m4a",
        137: "Audio/(137) SUSI.m4a",
        138: "Audio/(138) SUSI.m4a",
        139: "Audio/(139) SUSI.m4a",
        140: "Audio/(140) SUSI.m4a",
        141: "Audio/(141) SUSI.m4a"
      },
      "هشام": {
        135: "Audio/(135)HISYAM.m4a",
        136: "Audio/(136) HISYAM.m4a",
        137: "Audio/(137) HISYAM.m4a",
        138: "Audio/(138) HISYAM.m4a",
        139: "Audio/(139) HISYAM.m4a",
        140: "Audio/(140) HISYAM.m4a",
        141: "Audio/(141) HISYAM.m4a"
      },
      "ابن ذكوان": {
        135: "Audio/(135) ZAKWAN.m4a",
        136: "Audio/(136) ZAKWAN.m4a",
        137: "Audio/(137) ZAKWAN.m4a",
        138: "Audio/(138) ZAKWAN.m4a",
        139: "Audio/(139) ZAKWAN.m4a",
        140: "Audio/(140) ZAKWAN.m4a",
        141: "Audio/(141) ZAKWAN.m4a"
      },
        "شعبة": {
        135: "Audio/(135) SYU'BAH.m4a",
        136: "Audio/(136) SYU'BAH.m4a",
        137: "Audio/(137) SYU'BAH.m4a",
        138: "Audio/(138) SYU'BAH.m4a",
        139: "Audio/(139) SYU'BAH.m4a",
        140: "Audio/(140) SYU'BAH.m4a",
        141: "Audio/(141) SYU'BAH.m4a"
      },
        "حفص": {
        135: "Audio/(135) HAFS.m4a",
        136: "Audio/(136) HAFS.m4a",
        137: "Audio/(137) HAFS.m4a",
        138: "Audio/(138) HAFS.m4a",
        139: "Audio/(139) HAFS.m4a",
        140: "Audio/(140) HAFS.m4a",
        141: "Audio/(141) HAFS.m4a"
      },
        "خلف": {
        135: "Audio/(135) KHALLAF.m4a",
        136: "Audio/(136) KHALLAF.m4a",
        137: "Audio/(137) KHALAF.m4a",
        138: "Audio/(138) KHALLAF.m4a",
        139: "Audio/(139) KHALLAF.m4a",
        140: "Audio/(140) KHALLAF.m4a",
        141: "Audio/(141) KHALLAF.m4a"
      },     
        "خلاد": {
        135: "Audio/(135) KHALLAD.m4a",
        136: "Audio/(136) KHALLAD.m4a",
        137: "Audio/(137) KHALAD.m4a",
        138: "Audio/(138) KHALLAD.m4a",
        139: "Audio/(139) KHALLAD.m4a",
        140: "Audio/(140) KHALLAD.m4a",
        141: "Audio/(141) KHALLAD.m4a"
      },
        "أبو الحارث": {
        135: "Audio/(135) ABU HARITS.m4a",
        136: "Audio/(136) ABU HARITS.m4a",
        137: "Audio/(137) ABU HARITS.m4a",
        138: "Audio/(138) ABU HARITS.m4a",
        139: "Audio/(139) ABU HARITS.m4a",
        140: "Audio/(140) ABU HARITS.m4a",
        141: "Audio/(141) ABU HARITS.m4a"
      },
        "الدوري الكسائي": {
        135: "Audio/(135) DURI KISAI.m4a",
        136: "Audio/(136) DURI KISAI.m4a",
        137: "Audio/(137) DURI KISAI.m4a",
        138: "Audio/(138) DURI KISAI.m4a",
        139: "Audio/(139) DURI KISAI.m4a",
        140: "Audio/(140) DURI KISAI.m4a",
        141: "Audio/(141) DURI KISAI.m4a"
      },
      // Add more readers and ayahs here
    };

    const explanationTexts = {
      "قالون": {
        135: "القراءة بالقراءات كما هو متعارف عليه",
        136: "المد المنفصل - قرئ بالقصر/التوسط <br><br> ٱلنَّبِيُّونَ - تحقيق الهمزة مع التوسط (النبيئون)<br><br>صلة الميم الجمع",
        137: "المد المنفصل - قرئ بالقصر/التوسط <br><br> صلة الميم الجمع<br><br> وَهُوَ - بسكون الهاء",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "وَهُوَ - قرئ بإسكان الهاء <br><br> إسكان/صلة الميم الجمع <br><br> المد المنفصل - القصر/التوسط",
        140: "أَمْ تَقُولُونَ - قرئ بالياء الغيبة (أم يقولون) <br><br> ءَأَنتُمْ - تسهيل الهمزة الثانية مع الإدخال <br><br>  قرأ بصلة الميم الجمع (القصر/التوسط) أو بإسكانها",
        141: "صلة الميم الجمع أو بإسكانها"
      },
      "ورش": {
        135: "هُودًا أَوْ نَصَـٰرَىٰ - قرئ بالنقل والتقليل",
        136: "المد المنفصل - ٦ حركات <br><br> وَٱلْأَسْبَاطِ - قرئ بالنقل <br><br> مُوسَىٰ وَعِيسَىٰ - قرئ بالفتحة <br><br>ٱلنَّبِيُّونَ - المد مع الهمزة <br><br> المد البدل- ٢/٤/٦ حركات",
        137: "فَإِنْ ءَامَنُوا۟ - قرئ بالنقل <br><br> المد المنفصل - الإشباع<br><br> ءَامَنتُم - المد البدل بالقصر/التوسط/الإشباع",
        138: "وَمَنْ أَحْسَنُ - قرئ بالنقل",
        139: "قُلْ أَتُحَآجُّونَنَا - قرئ بالنقل <br><br> المد المنفصل - بإشباع <br><br> وَلَكُمْ أَعْمَـٰلُكُمْ - قرئ بالمد الصلة",
        140: "أَمْ تَقُولُونَ - قرئ بالياء الغيبة (أم يقولون) <br><br>  وَٱلْأَسْبَاطَ - قرئ بالنقل <br><br> هُودًا أَوْ نَصَـٰرَىٰ ۗ - قرئ بالنقل والتقليل <br><br> قُلْ ءَأَنتُمْ أَعْلَمُ - قرئ بالنقل والتسهيل الثانية بلا إدخال ومد الصلة <br><br> قُلْ ءَأَنتُمْ أَعْلَمُ - بإبدال الهمزة الثانية مع مشبع والمد الصلة فيها <br><br> وَمَنْ أَظْلَمُ - قرئ بالنقل وتغليظ اللام",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },
      "البزي": {
        135: "القراءة بالقراءات كما هو متعارف عليه",
        136: "صلة الميم الجمع <br><br> ٱلنَّبِيُّونَ - ابدال الهمزة ياء",
        137: "صلة الميم الجمع",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "صلة الميم الجمع",
        140: "أَمْ تَقُولُونَ - قرئ بالياء الغيبة (أم يقولون) <br><br> ءَأَنتُمْ - بتسهيل الثانية بلا إدخال وصلة الميم",
        141: "صلة الميم الجمع"
      },
      "قنبل": {
        135: "القراءة بالقراءات كما هو متعارف عليه",
        136: "صلة الميم الجمع <br><br> ٱلنَّبِيُّونَ - ابدال الهمزة ياء",
        137: "صلة الميم الجمع",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "صلة الميم الجمع",
        140: "أَمْ تَقُولُونَ - قرئ بالياء الغيبة (أم يقولون) <br><br> ءَأَنتُمْ - بتسهيل الثانية بلا إدخال وصلة الميم",
        141: "صلة الميم الجمع"
      },
        "الدوري": {
        135: "نَصَـٰرَىٰ - قرئ بإمالة",
        136: "مُوسَىٰ وَعِيسَىٰ - قرئ بالتقليل",
        137: "وَهُوَ - بسكون الهاء",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "وَهُوَ - بسكون الهاء",
        140: "أَمْ تَقُولُونَ - قرئ بالياء الغيبة (أم يقولون) <br><br> نَصَـٰرَىٰ - قرئ بإمالة <br><br> ءَأَنتُمْ - تسهيل الهمزة الثانية مع الإدخال",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },
      "السوسي": {
        135: "نَصَـٰرَىٰ - قرئ بإمالة",
        136: "مُوسَىٰ وَعِيسَىٰ - قرئ بالتقليل <br><br> وَنَحْنُ لَهُۥ - يعطف بالإدغام ثم الاختلاس",
        137: "وَهُوَ - بسكون الهاء",
        138: "وَنَحْنُ لَهُۥ - قرئ بالإدغام ثم الإختلاس",
        139: "وَهُوَ - بسكون الهاء <br><br> وَنَحْنُ لَهُۥ - يعطف بالإدغام ثم الإختلاس",
        140: "أَمْ تَقُولُونَ - قرئ بالياء الغيبة (أم يقولون) <br><br> نَصَـٰرَىٰ - قرئ بإمالة <br><br> ءَأَنتُمْ - تسهيل الهمزة الثانية مع الإدخال <br><br>  أَظْلَمُ مِمَّن - قرئ بإدغام",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },
      "هشام": {
        135: "إِبْرَٰهِـۧمَ - بقراءة إبراهام",
        136: " إِبْرَٰهِـۧمَ - بقراءة (إبراهام)",
        137: "القراءة بالقراءات كما هو متعارف عليه",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "القراءة بالقراءات كما هو متعارف عليه",
        140: "إِبْرَٰهِـۧمَ - قرئ ب 'إبراهام' <br><br> ءَأَنتُمْ - تسهيل الهمزة الثانية مع الإدخال وسكون الميم الجمع",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },
      "ابن ذكوان": {
        135: "القراءة بالقراءات كما هو متعارف عليه",
        136: "القراءة بالقراءات كما هو متعارف عليه",
        137: "القراءة بالقراءات كما هو متعارف عليه",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "القراءة بالقراءات كما هو متعارف عليه",
        140: "القراءة بالقراءات كما هو متعارف عليه",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },
        "شعبة": {
        135: "القراءة بالقراءات كما هو متعارف عليه",
        136: "القراءة بالقراءات كما هو متعارف عليه",
        137: "القراءة بالقراءات كما هو متعارف عليه",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "القراءة بالقراءات كما هو متعارف عليه",
        140: "أَمْ تَقُولُونَ - قرئ بالياء الغيبة (أم يقولون) ",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },
        "حفص": {
        135: "القراءة بالقراءات كما هو متعارف عليه",
        136: "القراءة بالقراءات كما هو متعارف عليه",
        137: "القراءة بالقراءات كما هو متعارف عليه",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "القراءة بالقراءات كما هو متعارف عليه",
        140: "القراءة بالقراءات كما هو متعارف عليه",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },
        "خلف": {
        135: "هُودًا أَوْ نَصَـٰرَىٰ - قرئ بالسكت على المفصول والإمالة <br><br> حَنِيفًۭا ۖ وَمَا - قرئ بترك الغنة",
        136: "وَٱلْأَسْبَاطِ - قرئ بالسكتة أو بدونها <br><br> مُوسَىٰ وَعِيسَىٰ - قرئ بإمالة ",
        137: "فَإِنْ ءَامَنُوا۟ - قرئ بالسكتة <br><br> المد المنفصل - قرئ بالإشباع",
        138: "وَمَنْ أَحْسَنُ - قرئ بالسكت",
        139: "المد المتصل والمنفصل - قرئ بالإشباع <br><br> قُلْ أَتُحَآجُّونَنَا/وَلَكُمْ أَعْمَـٰلُكُمْ - قرئ بالسكت على المفصول",
        140: "وَٱلْأَسْبَاطَ - قرئ بالسكتة <br><br> هُودًا أَوْ نَصَـٰرَىٰ ۗ - السكت على المفصول والإمالة <br><br> قُلْ ءَأَنتُمْ أَعْلَمُ - قرئ بسكت المفصول وتحقيق الهمزتين <br><br> وَمَنْ أَظْلَمُ - قرئ بالسكت على المفصول",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },     
        "خلاد": {
        135: "نَصَـٰرَىٰ - بالإمالة",
        136: "وَٱلْأَسْبَاطِ - قرئ بترك السكتة <br><br> مُوسَىٰ وَعِيسَىٰ - قرئ بإمالة",
        137: "فَإِنْ ءَامَنُوا۟ - قرئ بترك السكتة <br><br> المد المنفصل - قرئ بالإشباع",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "المد المتصل والمنفصل - قرئ بالإشباع",
        140: "نَصَـٰرَىٰ ۗ - قرئ بإمالة <br><br> ءَأَنتُمْ - بتحقيق الهمزتين بلا إدخال",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },
        "أبو الحارث": {
        135: "نَصَـٰرَىٰ - قرئ بإمالة",
        136: "مُوسَىٰ وَعِيسَىٰ - قرئ بإمالة",
        137: "وَهُوَ - بسكون الهاء",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "وَهُوَ - بسكون الهاء",
        140: "نَصَـٰرَىٰ ۗ - قرئ بإمالة <br><br> ءَأَنتُمْ - بتحقيق الهمزتين بلا إدخال",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },
        "الدوري الكسائي": {
        135: "نَصَـٰرَىٰ - قرئ بإمالة",
        136: "مُوسَىٰ وَعِيسَىٰ - قرئ بإمالة",
        137: "وَهُوَ - بسكون الهاء",
        138: "القراءة بالقراءات كما هو متعارف عليه",
        139: "وَهُوَ - بسكون الهاء",
        140: "نَصَـٰرَىٰ ۗ - قرئ بإمالة <br><br> ءَأَنتُمْ - بتحقيق الهمزتين بلا إدخال",
        141: "القراءة بالقراءات كما هو متعارف عليه"
      },


    };

    function setSelectedAyah(index, element) {{
  selectedAyahIndex = index;

    // Hide sub-boxes and show main boxes if needed
  const subBoxes = document.getElementById('subBoxesContainer');
  const optionBoxes = document.getElementById('optionContainer');

  if (!subBoxes.classList.contains('hidden')) {
    subBoxes.classList.add('hidden');
    optionBoxes.classList.remove('hidden');
  }

  // Apply the selected style to the clicked Ayah
  updateSelectedAyahHighlight();
  }

  function updateSelectedAyahHighlight() {
  document.querySelectorAll('.click-sound').forEach((el, i) => {
    el.classList.toggle('selected', i === selectedAyahIndex);
  });
}


      
      if (previouslySelected) previouslySelected.classList.remove('selected');
      element.classList.add('selected');
      previouslySelected = element;

      if (!document.getElementById('subBoxesContainer').classList.contains('hidden')) {
        updateSubBoxes();
      }
    }

    function showSubBoxes(imamKey, readers) {
      clickSound.currentTime = 0;
      clickSound.play();
      document.getElementById('optionContainer').classList.add('hidden');
      document.getElementById('subBoxesContainer').classList.remove('hidden');
      currentReaders = readers;
      updateSubBoxes();
    }

    function updateSubBoxes() {
      const wrapper = document.getElementById('subBoxesWrapper');
      wrapper.innerHTML = '';
      currentReaders.forEach((reader) => {
        const ayahNumber = selectedAyahIndex + 135;
        const audioUrl = audioSources[reader]?.[ayahNumber];
        const explanation = explanationTexts[reader]?.[ayahNumber] || `شرح الآية ${ayahNumber} - ${reader}`;

        const box = document.createElement('div');
        box.className = 'main-box sub-box bg-white rounded-xl p-6 border border-gray-200 shadow-sm w-full sm:w-2/5 md:w-1/3 lg:w-1/4';
        box.innerHTML = `
          <h3 class="font-bold text-lg text-gray-800 mb-3">
            <i class="fas fa-volume-up audio-button" onclick="playAudio(\'${reader}\')"></i> ${reader}
          </h3>
          <p class="text-gray-700 leading-relaxed">${explanation}</p>

          <button onclick="showImageModal('your-image-url.jpg')" class="mt-4 bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
  عرض الصفحة كاملة
</button>
        
        `;
        
        wrapper.appendChild(box);
      });
      
    }

function showImageModal(imageUrl) {
  const modal = document.getElementById('imageModal');
  const modalImage = document.getElementById('modalImage');
  const downloadLink = document.getElementById('downloadLink');
  modalImage.src = imageUrl;
  downloadLink.href = imageUrl;
  modal.classList.remove('hidden');
  // Force reflow then add show class for transition
  requestAnimationFrame(() => modal.classList.add('show'));
}

function closeImageModal() {
  const modal = document.getElementById('imageModal');
  modal.classList.remove('show');
  setTimeout(() => {
    modal.classList.add('hidden');
  }, 300); // Match with CSS transition duration
}

document.getElementById('imageModal').addEventListener('click', function (e) {
  // Close modal only if the user clicks on the backdrop, not the modal content
  if (!e.target.closest('.modal-content')) {
    closeImageModal();
  }
});


    function hideSubBoxes() {
      clickSound.currentTime = 0;
      clickSound.play();
      document.getElementById('subBoxesContainer').classList.add('hidden');
      document.getElementById('optionContainer').classList.remove('hidden');
    }


  // Insert "عرض الصفحة كاملة" button into sub-boxes dynamically (example logic)
    function updateSubBoxes() {
      const wrapper = document.getElementById('subBoxesWrapper');
      wrapper.innerHTML = '';
      currentReaders.forEach((reader) => {
        const ayahNumber = selectedAyahIndex + 135;
        const audioUrl = audioSources[reader]?.[ayahNumber];
        const explanation = explanationTexts[reader]?.[ayahNumber] || `شرح الآية ${ayahNumber} - ${reader}`;
        const imageUrl = fullPageImages[reader]?.[ayahNumber] || 'https://via.placeholder.com/800x600?text=Page+' + ayahNumber;

        const box = document.createElement('div');
        box.className = 'main-box sub-box bg-white rounded-xl p-6 border border-gray-200 shadow-sm w-full sm:w-2/5 md:w-1/3 lg:w-1/4';
        box.innerHTML = `
          <h3 class="font-bold text-lg text-gray-800 mb-3">
            <i class="fas fa-volume-up audio-button size 20" onclick="playAudio(\'${reader}\')"></i> ${reader}
          </h3>
          <p class="text-gray-700 leading-relaxed mb-4">${explanation}</p>
          <button onclick="showImageModal('${imageUrl}')" class="bg-blue-300 text-white px-2 py-1 rounded hover:bg-blue-500" style="size:20px;">
            عرض الأية الكاملة
          </button>
        `;
        wrapper.appendChild(box);
      });
    }

    const fullPageImages = {
      "قالون": {
        135: "images/Qalun 135.jpg",
        136: "images/Qalun 136.jpg",
        137: "images/Qalun 137.jpg",
        138: "images/Qalun 138.jpg",
        139: "images/Qalun 139.jpg",
        140: "images/Qalun 140.jpg",
        141: "images/Qalun 141.jpg"
      },
      "ورش": {
        135: "images/Warsy 135.jpg",
        136: "images/Warsy 136.jpg",
        137: "images/Warsy 137.jpg",
        138: "images/Warsy 138.jpg",
        139: "images/Warsy 139.jpg",
        140: "images/Warsy 140.jpg",
        141: "images/Warsy 141.jpg"
      },
      "البزي": {
        135: "images/Al-Bazzi 135.jpg",
        136: "images/Al-Bazzi 136.jpg",
        137: "images/Al-Bazzi 137.jpg",
        138: "images/Al-Bazzi 138.jpg",
        139: "images/Al-Bazzi 139.jpg",
        140: "images/Al-Bazzi 140.jpg",
        141: "images/Al-Bazzi 141.jpg"
      },
      "قنبل": {
        135: "images/Qunbul 135.jpg",
        136: "images/Qunbul 136.jpg",
        137: "images/Qunbul 137.jpg",
        138: "images/Qunbul 138.jpg",
        139: "images/Qunbul 139.jpg",
        140: "images/Qunbul 140.jpg",
        141: "images/Qunbul 141.jpg"
      },
        "الدوري": {
        135: "images/Al-Duri Abu Amru 135.jpg",
        136: "images/Al-Duri Abu Amru 136.jpg",
        137: "images/Al-Duri Abu Amru 137.jpg",
        138: "images/Al-Duri Abu Amru 138.jpg",
        139: "images/Al-Duri Abu Amru 139.jpg",
        140: "images/Al-Duri Abu Amru 140.jpg",
        141: "images/Al-Duri Abu Amru 141.jpg"
      },
      "السوسي": {
        135: "images/Al-Susi 135.jpg",
        136: "images/Al-Susi 136.jpg",
        137: "images/Al-Susi 137.jpg",
        138: "images/Al-Susi 138.jpg",
        139: "images/Al-Susi 139.jpg",
        140: "images/Al-Susi 140.jpg",
        141: "images/Al-Susi 141.jpg"
      },
      "هشام": {
        135: "images/Hisham 135.jpg",
        136: "images/Hisham 136.jpg",
        137: "images/Hisham 137.jpg",
        138: "images/Hisham 138.jpg",
        139: "images/Hisham 139.jpg",
        140: "images/Hisham 140.jpg",
        141: "images/Hisham 141.jpg"
      },
      "ابن ذكوان": {
        135: "images/Ibnu Zakwan 135.jpg",
        136: "images/Ibnu Zakwan 136.jpg",
        137: "images/Ibnu Zakwan 137.jpg",
        138: "images/Ibnu Zakwan 138.jpg",
        139: "images/Ibnu Zakwan 139.jpg",
        140: "images/Ibnu Zakwan 140.jpg",
        141: "images/Ibnu Zakwan 141.jpg"
      },
        "شعبة": {
        135: "images/Syukbah 135.jpg",
        136: "images/Syukbah 136.jpg",
        137: "images/Syukbah 137.jpg",
        138: "images/Syukbah 138.jpg",
        139: "images/Syukbah 139.jpg",
        140: "images/Syukbah 140.jpg",
        141: "images/Syukbah 141.jpg"
      },
        "حفص": {
        135: "images/Hafs 135.jpg",
        136: "images/Hafs 136.jpg",
        137: "images/Hafs 137.jpg",
        138: "images/Hafs 138.jpg",
        139: "images/Hafs 139.jpg",
        140: "images/Hafs 140.jpg",
        141: "images/Hafs 141.jpg"
      },
        "خلف": {
        135: "images/Khalaf 135.jpg",
        136: "images/Khalaf 136.jpg",
        137: "images/Khalaf 137.jpg",
        138: "images/Khalaf 138.jpg",
        139: "images/Khalaf 139.jpg",
        140: "images/Khalaf 140.jpg",
        141: "images/Khalaf 141.jpg"
      },     
        "خلاد": {
        135: "images/Khallad 135.jpg",
        136: "images/Khallad 136.jpg",
        137: "images/Khallad 137.jpg",
        138: "images/Khallad 138.jpg",
        139: "images/Khallad 139.jpg",
        140: "images/Khallad 140.jpg",
        141: "images/Khallad 141.jpg"
      },
        "أبو الحارث": {
        135: "images/Abu Harith 135.jpg",
        136: "images/Abu Harith 136.jpg",
        137: "images/Abu Harith 137.jpg",
        138: "images/Abu Harith 138.jpg",
        139: "images/Abu Harith 139.jpg",
        140: "images/Abu Harith 140.jpg",
        141: "images/Abu Harith 141.jpg"
      },
        "الدوري الكسائي": {
        135: "images/Al-Duri Kisaie 135.jpg",
        136: "images/Al-Duri Kisaie 136.jpg",
        137: "images/Al-Duri Kisaie 137.jpg",
        138: "images/Al-Duri Kisaie 138.jpg",
        139: "images/Al-Duri Kisaie 139.jpg",
        140: "images/Al-Duri Kisaie 140.jpg",
        141: "images/Al-Duri Kisaie 141.jpg"
      },

    }

    function playAudio(reader) {
  const icon = event.target;

  // Add animation class
  icon.classList.add('active');

  // Remove it after animation (200ms)
  setTimeout(() => {
    icon.classList.remove('active');
  }, 200);

  const ayahNumber = selectedAyahIndex + 135;
  const url = audioSources[reader]?.[ayahNumber];
  if (url) {
    const audio = new Audio(url);
    audio.play();
  } else {
    alert('لا يوجد ملف صوتي لهذه الآية');
  }
}


function playAudio(reader) {
  const ayahNumber = selectedAyahIndex + 135;
  const url = audioSources[reader]?.[ayahNumber];

  if (url) {
    const audioPlayerContainer = document.getElementById('audioPlayerContainer');
    const audioPlayer = document.getElementById('ayahAudioPlayer');

    // Set the audio source and load it
    audioPlayer.src = url;
    audioPlayer.load();
    audioPlayer.play();

    // Show the player
    audioPlayerContainer.classList.remove('hidden');

    // Add visual feedback to icon
    const icon = event.target;
    icon.classList.add('active');
    setTimeout(() => icon.classList.remove('active'), 200);
  } else {
    alert('لا يوجد ملف صوتي لهذه الآية');
  }
}

  </script>
</body>
</html>
